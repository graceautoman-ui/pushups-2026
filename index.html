<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>Push-ups 2026</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body>
  <h1>2026 俯卧撑记录</h1>
<div>
  <label>
    年度目标：
    <input id="goal" type="number" value="8000" min="1" />
  </label>
</div>

<p id="stats">统计加载中…</p>
  <h2>新增一次记录</h2>

  <form>
    <div>
      <label>
        日期：
        <input id="date" type="date" />
      </label>
    </div>

    <div>
      <label>
        场景：
       <select id="scene">
          <option>厕所</option>
          <option>家里</option>
          <option>户外</option>
          <option>其他</option>
        </select>
      </label>
    </div>

    <div>
      <label>
        类型：
        <select id="type">
          <option>跪姿俯卧撑</option>
          <option>站姿俯卧撑</option>
          <option>标准俯卧撑</option>
        </select>
      </label>
    </div>

    <div>
      <label>
        完成个数：
        <input id="count" type="number" placeholder="例如 20" />
      </label>
    </div>

    <button id="saveBtn" type="button">保存记录</button>
  </form>
<h2>记录列表</h2>
<ul id="logList"></ul>

<script>
  const LS_KEY = "pushups_2026_logs";

  function loadLogs() {
    const raw = localStorage.getItem(LS_KEY);
    return raw ? JSON.parse(raw) : [];
  }

  function saveLogs(logs) {
    localStorage.setItem(LS_KEY, JSON.stringify(logs));
  }

  function render() {
    const logs = loadLogs();
    const ul = document.getElementById("logList");
    ul.innerHTML = "";
    logs.slice().reverse().forEach(item => {
      const li = document.createElement("li");
      li.textContent = `${item.date} | ${item.scene} | ${item.type} | ${item.count}个`;
      ul.appendChild(li);
        const goal = Number(document.getElementById("goal").value) || 8000;
    const total = logs.reduce((sum, x) => sum + (Number(x.count) || 0), 0);
    const remaining = Math.max(goal - total, 0);
    const pct = goal > 0 ? Math.min((total / goal) * 100, 100) : 0;

    document.getElementById("stats").textContent =
      `累计完成：${total} 个；还差：${remaining} 个；进度：${pct.toFixed(1)}%`;});
  }

  document.getElementById("saveBtn").addEventListener("click", () => {
    const date = document.getElementById("date").value;
    const scene = document.getElementById("scene").value;
    const type = document.getElementById("type").value;
    const count = Number(document.getElementById("count").value);

    if (!date) return alert("请选择日期");
    if (!count || count <= 0) return alert("完成个数需要是正整数");

    const logs = loadLogs();
    logs.push({ date, scene, type, count });
    saveLogs(logs);

    document.getElementById("count").value = "";
    render();
  });

  // 默认日期=今天
  document.getElementById("date").valueAsDate = new Date();

  render();
</script>
</body>
</html>